<!-- Rangliste -->
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <link href="static/style.css" rel="stylesheet">
  <title>Atmiņas spēle</title>
</head>
<body>
  <div class="wrapper">
    <div class="header">
      <h1>Atmiņas spēle</h1>
      <ul>
        <li>
          <a href="/">Sākums</a>
        </li>
        <li>
          <a href="game">Spēle</a>
        </li>
        <li>
          <a href="top">Tops</a>
        </li>
        <li>
          <a href="about">Par</a>
        </li>
      </ul>
    </div> <!-- Beidzas header -->

    <div class="content">
      <h3>Tops</h3>
      <button onclick='pievienotTop()'>Pievienoties top'am</button>
      <hr />
      
      <!-- Tabelle für die Rangliste -->
      <table class='tops'>
        <tr>
          <th>Spēlētājs</th>
          <th>Laiks</th>
          <th>Versiju skaits</th>
          <th>Līmenis</th>
        </tr>
        <!-- Dynamische Einträge werden hier eingefügt -->
        <tbody id="topResults"></tbody>
      </table>

    </div> <!-- Beidzas content -->

  </div> <!-- Beidzas wrapper -->

  <script>
    // Funktion zum Laden der Top-Ergebnisse (dynamisch)
    function loadTopResults() {
      fetch('/topData')
        .then(response => response.json())
        .then(data => {
          const topResultsContainer = document.getElementById('topResults');
          topResultsContainer.innerHTML = ''; // Leert die Tabelle

          // Iteriere über jedes Ergebnis und füge es zur Tabelle hinzu
          data.forEach(item => {
            const row = document.createElement('tr');
            row.innerHTML = `
              <td>${item.vards}</td>
              <td>${item.laiks} sekundes</td>
              <td>${item.klikski}</td>
              <td>${item.limenis}</td>
            `;
            topResultsContainer.appendChild(row);
          });
        })
        .catch(error => console.error('Fehler beim Laden der Rangliste:', error));
    }

    // Aufruf der Funktion, wenn die Seite geladen wird
    window.onload = loadTopResults;
  </script>

  <script src="static/top.js"></script>

</body>
</html>